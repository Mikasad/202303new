update:2021.8.18 H3AA30-C1版本
40机器调试完成
修复：
1.无刷电机使能报HALL错误，位CW和CCW值为0
新增：
1.推杆电机上电标定
2.推杆电机位置控制
3.新增对象字典 （全局错误、当前错误、推杆给定位置、推杆实际位置、推杆标定标志位、位置环使能标志）

updata:2021.8.20
新增状态指示灯
1.错误报警同时显示两个错误只显示最后一个发生的错误

updata:2021.8.28
1.禁止报错之后继续拧电机轴，进入外部中断，外部中断会换向
2.将主函数的PID计算移到嘀嗒定时器
3.将霍尔两个霍尔学习分开，Motorstate 8 五号电机 9 六号电机
4.新增堵转保护（未完善）
5.ADC模拟看门狗和看门狗1S喂狗（模拟看门狗当中未处理，由于温度读取上拉信号未ADC采样最大值阈值没法设置）

updata:2021.9.2
修复BUG：1.断线保护功能失效导致代码跑飞（优先级问题）
          2.CAN通信异常终止（旧版本的CAN库存在的BUG）
          3.更改为外部时钟
          4.将三路ADC的温度采样改为与采上一个通道（并打开模拟看门狗）

updata:2021.9.13
1.新增未接霍尔报错
2.打开堵转功能
3.新增四个推杆上电收回标定（标定在INIT状态机当中执行），以及4个推杆位置控制
4.优化过压欠压错误报警功能（门限值低于电压限制值2V在计数值开始--）
5.将主函数所有的具有时间效应的功能都移到嘀嗒定时器当中（包括获取速度、状态机、过压保护）


updata: 2021 .9.15
1.新增两个无刷BRAKE功能（brake报错指示灯未做）
2.新增过流保护四个阶段
3.新增电容充电
4.将速度环计算加入MotorSpeedSet case当中
5.解决使能电机5边刷开启的BUG为换向CCER值问题
updata:9.22
1.修复误触发brake中断BUG
2.新增BLDC电容充电，打开下管
H4AA30-C1_S线_ 该版本与9.15版本的差异为使能电机5边刷动或者不动，9.13版本为S线车上的代码，该版本为9-13版本升级版，需要上车测试

updata:10.10  H3AA30-C2版本
1.更改与C1版本差异的引脚
2.新增4路推杆和4单向电机硬件过流保护
3.修改无刷霍尔外部中断优先级2——>1（解决两个位置的换向冲突问题）
4.修复无刷5、无刷6电机运行过程中的电流尖峰（霍尔中断当中新增判断条件MotorControl[6].Direction == 1 || MotorControl[6].Direction == -1，在2msPID运算周期换向前关闭外部中断）
存在问题：无刷电机电流干扰问题

updata:10.11
1.CANopen新增值更改主动报错功能
2.TPDO1为触发方式为01，收到单个同步帧响应数据

updata:10.18
1.修改OVR和UVR
2.新增硬件过流指示灯

updata:10.22
1.修改推杆霍尔外部中断 else当中pwmduty为0时受到干扰霍尔值自增导致推杆不能到位置，PWM值一直存在

uapdata:10.30
1.修改推杆加速过程从PWM1000开始加速
2.推杆停机充电
3.缩短推杆的反方向停机时间，以及CCW\CW\STOP的宏定义去掉其中的for延迟
4.打开推杆BRAKE
5.（40机器修改边刷的选装方向）

updata:11.4
1.修改风机上电报brake问题

update:11.5			author ：diamond
1.修改24V上电延时100ms->500ms以保证风机上电不报brake

update:11.8
1.增加风机故障报警，根据报警信息不同报警灯闪烁6次

update:11.15
1.S线————修改电机1（吸水趴推杆）方向

updata:11.22
1.修复硬件短路报警的bug
	#1检测到电机3，4在报警后的PWM仍然会有低电平跳变，原因是定时器的ccr需要和8400做比较（大于8400）。
	因此需要定义常量
	PWM_PeriodOFFSET以保证输出恒为高电平(目前电机3，4，7，8，10，11均存在此问题，已修正)
	#2在频率较低的情况下，通过修改PWM来调整定时器输出的方法存在延时，
	例：50hz频率，需要进3-10次硬件中断才能调整PWM为高电平。
	因此改为修改TIMx->EGR=1的方法来调整定时器输出以达到最快的速度。
	
update:11.24
1.增加上位机相关文件Agreement.c和flash.c
startup_stm32f407xx.s的line33和line44改为0x1000否则会造成栈溢出，程序跑飞
2.增加过流最大次数限制，当累计过流超过BREAK_CNT_MAX后，相关电机禁止使能。
	且报警灯一直闪烁，直到软件清除报警次数
3.增加canRPDO，可以通过can进行过流最大次数的读取和清零，以及flash的读写
增加历史故障记录，可记录最近10次产生的报警，可通过SDO读取错误报警码以及错误报警码产生时的嘀嗒
4.看门狗5s

update:11.30
1.增加无刷三相检测，电机相线接错后，电机不动或来回振动会产生报警码MOTOR5_PHASE_ERROR和MOTOR6_PHASE_ERROR

upadata:12.1
1.新增推杆霍尔保护和断线保护 ，4路推杆短线保护强制打开，霍尔保护选择打开（wGlobal_Flags只提示推杆错误并且报警（霍尔或者断线），
  具体哪个推杆电机错误需要读取wGlobal_Flags1，并且wGlobal_Flags1不会自动TPDO发送）
2.新增无刷缺相保护    （wGlobal_Flags只提示5号无刷缺相或者6号无刷缺相，具体的错误需要读取wGlobal_Flags1，wGlobal_Flags1不会自动TPDO发送）
3.新增三四号电机断线保护 （wGlobal_Flags中提示三号四号电机错误）
4.修改错误报警指示灯，新增第二个32位全局错误，不会自动上传
5.新增电压偏置上电修正

张家港固定版本
增加推杆自适应算法

update:2022.4.11
1.增加推杆超时保护，开启滚刷推杆电机霍尔保护
2.超速保护已修改
3.绿灯闪烁已修改
4.ADC中断以及DMA中断已取消
5.过压欠压灯状态以及指示灯报警已修改